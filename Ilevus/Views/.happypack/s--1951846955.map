{"version":3,"sources":["legacy\\jsx\\core\\view\\user\\coaching\\SessionDetails.jsx"],"names":["_","require","S","moment","numeral","React","Link","Toastr","Messages","CoachingStore","UserSession","EditableTextArea","SessionCharts","SessionHistory","SessionTags","SessionTimer","SessionTools","LoadingGauge","Modal","UserIcon","CommitmentBg","FeedbackBg","ProcessStep","module","exports","createClass","contextTypes","router","PropTypes","object","childContextTypes","isCoach","bool","process","getChildContext","state","getRoute","session","getInitialState","loading","componentDidMount","me","on","props","params","context","replace","id","Sessions","length","setState","get","Id","Coach","lastModified","LastModified","delay","pollModifications","push","success","dispatch","action","ACTION_RETRIEVE_COACHING_PROCESS","data","componentDidUpdate","setTimeout","jQuery","parent","scrollLeft","document","querySelector","offsetLeft","componentWillUnmount","off","componentWillReceiveProps","newProps","newContext","ACTION_POLL_PROCESS_MODIFICATIONS","updateProcessStep","event","step","parseInt","target","value","ACTION_CHANGE_SESSION_PROCESS_STEP","Session","Step","updateSessionField","field","ACTION_UPDATE_SESSION_FIELD","ProcessId","Field","Value","objectiveChange","newValue","Objectives","forceUpdate","coacheeCommentsChange","CoacheeComments","coachCommentsChange","CoachComments","selectSession","index","saveEvaluation","preventDefault","ACTION_EVALUATE_SESSION","Rating","refs","valueAsNumber","Commitment","render","children","coach","coachee","Coachee","other","sessionIndex","inProgress","Status","currentSession","latestFinished","backgroundImage","Image","isEmpty","Name","Surname","display","width","Steps","map","Label","overflowX","step1","index1","substring","backgroundColor"],"mappings":"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","file":"SessionDetails.jsx","sourceRoot":"C:/Projetos/Nova pasta/ilevus/Ilevus/Views","sourcesContent":["\r\nvar _ = require(\"underscore\");\r\nvar S = require(\"string\");\r\nvar moment = require(\"moment\");\r\nvar numeral = require(\"numeral\");\r\nvar React = require('react');\r\nvar Link = require(\"react-router\").Link;\r\nvar Toastr = require('toastr');\r\n\r\nvar Messages = require(\"ilevus/jsx/core/util/Messages.jsx\");\r\n\r\nvar CoachingStore = require(\"ilevus/jsx/core/store/Coaching.jsx\");\r\nvar UserSession = require(\"ilevus/jsx/core/store/UserSession.jsx\");\r\n\r\nvar EditableTextArea = require(\"ilevus/jsx/core/widget/coaching/EditableTextArea.jsx\");\r\nvar SessionCharts = require(\"ilevus/jsx/core/widget/coaching/SessionCharts.jsx\");\r\nvar SessionHistory = require(\"ilevus/jsx/core/widget/coaching/SessionHistory.jsx\");\r\nvar SessionTags = require(\"ilevus/jsx/core/widget/coaching/SessionTags.jsx\");\r\nvar SessionTimer = require(\"ilevus/jsx/core/widget/coaching/SessionTimer.jsx\");\r\nvar SessionTools = require(\"ilevus/jsx/core/widget/coaching/SessionTools.jsx\");\r\n\r\nvar LoadingGauge = require(\"ilevus/jsx/core/widget/LoadingGauge.jsx\");\r\nvar Modal = require(\"ilevus/jsx/core/widget/Modal.jsx\");\r\n\r\nvar UserIcon = require(\"ilevus/img/user.png\");\r\n\r\nvar CommitmentBg = \"rgba(75,192,192,0.4)\";\r\nvar FeedbackBg = \"rgba(103, 58, 183, 0.2)\";\r\n\r\nvar ProcessStep = \"\";\r\n\r\nmodule.exports = React.createClass({\r\n    contextTypes: {\r\n        router: React.PropTypes.object,\r\n    },\r\n    childContextTypes: {\r\n        isCoach: React.PropTypes.bool,\r\n        process: React.PropTypes.object,\r\n    },\r\n    getChildContext() {\r\n        return {\r\n            isCoach: this.state.isCoach,\r\n            process: this.state.process,\r\n        };\r\n    },\r\n    getRoute(process, session) {\r\n        return \"/coaching/process/\" + process + \"/\" + session;\r\n    },\r\n\r\n    getInitialState() {\r\n        return {\r\n            isCoach: false,\r\n            process: null,\r\n            loading: true\r\n        };\r\n    },\r\n\r\n    componentDidMount() {\r\n        var me = this;\r\n        CoachingStore.on(\"retrieve-coaching-process\", (process) => {\r\n            if (!this.props.params.session) {\r\n                me.context.router.replace(me.getRoute(me.props.params.id, process.Sessions.length - 1));\r\n            }\r\n            me.setState({\r\n                isCoach: UserSession.get(\"user\").Id === process.Coach.Id,\r\n                process: process,\r\n                lastModified: process.LastModified,\r\n                loading: false,\r\n            });\r\n            _.delay(this.pollModifications, 5000);\r\n        }, me);\r\n\r\n        CoachingStore.on(\"process-modified\", (process) => {\r\n            me.setState({\r\n                process: process,\r\n                lastModified: process.LastModified,\r\n            });\r\n            _.delay(this.pollModifications, 5000);\r\n        }, me);\r\n        CoachingStore.on(\"process-not-modified\", () => {\r\n            _.delay(this.pollModifications, 5000);\r\n        }, me);\r\n\r\n        CoachingStore.on(\"updated-session-field\", (process) => {\r\n            me.setState({\r\n                process: process,\r\n                lastModified: process.LastModified,\r\n            });\r\n        }, me);\r\n\r\n        CoachingStore.on(\"new-session\", (process) => {\r\n            me.setState({\r\n                process: process,\r\n                lastModified: process.LastModified,\r\n            });\r\n            me.context.router.push(me.getRoute(me.props.params.id, process.Sessions.length - 1));\r\n        }, me);\r\n        CoachingStore.on(\"start-session\", (process) => {\r\n            me.setState({\r\n                process: process,\r\n                lastModified: process.LastModified,\r\n            });\r\n        }, me);\r\n        CoachingStore.on(\"finish-session\", (process) => {\r\n            me.setState({\r\n                process: process,\r\n                lastModified: process.LastModified,\r\n            });\r\n        }, me);\r\n\r\n        CoachingStore.on(\"change-session-process-step\", (process) => {\r\n            me.setState({\r\n                process: process,\r\n                lastModified: process.LastModified,\r\n            });\r\n        }, me);\r\n        \r\n        CoachingStore.on(\"evaluate-session\", (process) => {\r\n            Toastr.success(Messages.get(\"TextEvaluationSaved\"));\r\n            me.setState({\r\n                process: process,\r\n                lastModified: process.LastModified,\r\n            });\r\n        }, me);\r\n\r\n        CoachingStore.dispatch({\r\n            action: CoachingStore.ACTION_RETRIEVE_COACHING_PROCESS,\r\n            data: me.props.params.id\r\n        });\r\n\r\n    },\r\n    componentDidUpdate() {\r\n        setTimeout(function () {\r\n            jQuery('.breadcrumb .active').parent().scrollLeft(document.querySelector('.breadcrumb .active').offsetLeft);\r\n        }, 2000);\r\n    },\r\n\r\n    componentWillUnmount() {\r\n        CoachingStore.off(null, null, this);\r\n    },\r\n\r\n    componentWillReceiveProps(newProps, newContext) {\r\n        if (this.props.params.id != newProps.params.id) {\r\n            this.setState({ loading: true });\r\n            CoachingStore.dispatch({\r\n                action: CoachingStore.ACTION_RETRIEVE_COACHING_PROCESS,\r\n                data: newProps.params.id\r\n            });\r\n        }\r\n    },\r\n\r\n    pollModifications() {\r\n        CoachingStore.dispatch({\r\n            action: CoachingStore.ACTION_POLL_PROCESS_MODIFICATIONS,\r\n            data: {\r\n                id: this.props.params.id,\r\n                lastModified: this.state.lastModified,\r\n            }\r\n        });\r\n    },\r\n\r\n    updateProcessStep(event) {\r\n        var step = parseInt(event.target.value);\r\n        CoachingStore.dispatch({\r\n            action: CoachingStore.ACTION_CHANGE_SESSION_PROCESS_STEP,\r\n            data: {\r\n                Id: this.props.params.id,\r\n                Session: parseInt(this.props.params.session),\r\n                Step: step,\r\n            }\r\n        });\r\n    },\r\n\r\n    updateSessionField(field, value) {\r\n        CoachingStore.dispatch({\r\n            action: CoachingStore.ACTION_UPDATE_SESSION_FIELD,\r\n            data: {\r\n                ProcessId: this.props.params.id,\r\n                Session: parseInt(this.props.params.session),\r\n                Field: field,\r\n                Value: value\r\n            }\r\n        });\r\n    },\r\n    objectiveChange(newValue) {\r\n        this.state.process.Sessions[parseInt(this.props.params.session)].Objectives = newValue;\r\n        this.forceUpdate();\r\n        this.updateSessionField(\"Objectives\", newValue);\r\n    },\r\n    coacheeCommentsChange(newValue) {\r\n        this.state.process.Sessions[parseInt(this.props.params.session)].CoacheeComments = newValue;\r\n        this.forceUpdate();\r\n        this.updateSessionField(\"CoacheeComments\", newValue);\r\n    },\r\n    coachCommentsChange(newValue) {\r\n        this.state.process.Sessions[parseInt(this.props.params.session)].CoachComments = newValue;\r\n        this.forceUpdate();\r\n        this.updateSessionField(\"CoachComments\", newValue);\r\n    },\r\n\r\n    selectSession(index) {\r\n        this.context.router.push(this.getRoute(this.props.params.id, index));\r\n    },\r\n\r\n    saveEvaluation(event) {\r\n        event && event.preventDefault();\r\n        var me = this;\r\n        CoachingStore.dispatch({\r\n            action: CoachingStore.ACTION_EVALUATE_SESSION,\r\n            data: {\r\n                Id: me.props.params.id,\r\n                Session: parseInt(this.props.params.session),\r\n                Rating: this.refs['rate-feedback'].valueAsNumber,\r\n                Commitment: this.refs['rate-commitment'].valueAsNumber\r\n            }\r\n        });\r\n    },\r\n\r\n    render() {\r\n        if (this.state.loading) {\r\n            return <LoadingGauge />;\r\n        }\r\n\r\n        if (this.props.children) {\r\n            return this.props.children;\r\n        }\r\n\r\n        var process = this.state.process,\r\n            isCoach = this.state.isCoach,\r\n            coach = process.Coach,\r\n            coachee = process.Coachee,\r\n            other = isCoach ? coachee : coach,\r\n            sessionIndex = parseInt(this.props.params.session),\r\n            session = process.Sessions[sessionIndex],\r\n            inProgress = (session.Status > 0) && (session.Status < 10),\r\n            currentSession = process.Sessions.length == (sessionIndex + 1),\r\n            latestFinished = process.Sessions[process.Sessions.length - 1].Status >= 10\r\n        ;\r\n        return (\r\n            <div className=\"container my-5\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-xs-12 col-sm-8\">\r\n                        <div className=\"row mb-5\">\r\n                            <div className=\"col\">\r\n                                <div className=\"ilv-media\">\r\n                                    <div className=\"ilv-media-left mr-4\">\r\n                                        <div className=\"ilv-avatar-fluid ilv-avatar-fluid-xl\"\r\n                                             style={{ backgroundImage: \"url(\" + (S(other.Image).isEmpty() ? UserIcon : other.Image) + \")\" }\r\n                                        } />\r\n                                    </div>\r\n                                    <div className=\"ilv-media-body\">\r\n                                        <h1 className=\"ilv-font-weight-bold\">{Messages.get('LabelSession')}: {sessionIndex + 1}</h1>\r\n                                        <p className=\"ilv-text-large\">\r\n                                            {isCoach ? Messages.get(\"TextCoachingSessionTo\") : Messages.get(\"TextCoachingSessionBy\")} <em>{other.Name} {other.Surname}</em>.\r\n                                        </p>\r\n                                    </div>\r\n                                    <div className=\"ilv-media-right\">\r\n                                        <div className=\"dropdown\" style={{display: 'inline-block'}}>\r\n                                            <button className=\"ilv-btn ilv-btn-clean\" data-toggle=\"dropdown\">\r\n                                                <i className=\"ilv-icon material-icons md-24\">&#xE2C4;</i>\r\n                                            </button>\r\n                                            <div className=\"dropdown-menu dropdown-menu-right\">\r\n                                                <a className=\"dropdown-item\" href=\"#\">{Messages.get(\"LabelDownloadSession\")}</a>\r\n                                                <a className=\"dropdown-item\" href=\"#\">{Messages.get(\"LabelDownloadAllSessions\")}</a>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <hr className=\"mb-3\"/>\r\n                                <div className=\"ilv-media ilv-media-middle\">\r\n                                    \r\n                                    <div className=\"ilv-media-body\" style={{ width: '100%'}}>\r\n                                        {isCoach ? (<select className=\"ilv-form-control ilv-form-control-sm\" defaultValue={session.ProcessStep} onChange={this.updateProcessStep}>\r\n                                            <div className=\"ilv-media-left mr-3\">\r\n                                                <span className=\"ilv-font-weight-semibold\">{Messages.get('LabelRelatedProcessStep')}:</span>\r\n                                            </div>\r\n                                            {process.Steps.map((step, index) => {\r\n                                                return <option value={index} key={\"process-step-\"+index}>{index+1} - {step.Label}</option>\r\n                                            })}\r\n                                        </select>):(<div className=\"dvBreadcrumb\" style={{overflowX: 'auto'}}><ul className=\"breadcrumb mb-3 breadcrumb-scroll\">\r\n                                            {process.Steps.map((step1, index1) => {\r\n                                                ProcessStep = (session.ProcessStep == index1 ? \"active\" : session.ProcessStep > index1 ? \"completed\" : \"\");\r\n                                                return <li className={ProcessStep }><a href=\"javascript:;\" title={step1.Label }>{ (step1.Label.length > 20 ? step1.Label.substring(0, 20) + ' ...' : step1.Label) }</a></li>\r\n                                            })}\r\n                                        </ul></div>)}\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <hr className=\"mt-3 mb-5\" />\r\n\r\n                                <EditableTextArea\r\n                                                  label={Messages.get('LabelSessionObjectives')}\r\n                                                  value={session.Objectives}\r\n                                                  editable={isCoach && inProgress}\r\n                                                  onChange={this.objectiveChange} />\r\n                                <SessionTags ref=\"timer\"\r\n                                             process={process}\r\n                                             session={session}\r\n                                             sessionIndex={sessionIndex}\r\n                                             isCoach={isCoach} />\r\n                                \r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"row mb-5\">\r\n                            <SessionTools className=\"col\" isCoach={isCoach} processId={this.props.params.id} session={session} sessionIndex={sessionIndex} />\r\n                        </div>\r\n\r\n                        <div className=\"row mb-5\">\r\n                            <div className=\"col\">\r\n                                <EditableTextArea label={Messages.get('LabelMyComments')}\r\n                                              value={isCoach ? session.CoachComments : session.CoacheeComments}\r\n                                              editable={inProgress}\r\n                                              onChange={isCoach ? this.coachCommentsChange : this.coacheeCommentsChange} />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"row mb-5\">\r\n                            <div className=\"col\">\r\n                                <EditableTextArea label={Messages.get(isCoach ? 'LabelCoacheeComments':'LabelCoachComments')}\r\n                                              value={isCoach ? session.CoacheeComments : session.CoachComments}\r\n                                              editable={false} />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"col-sm-4\">\r\n                        <SessionTimer ref=\"timer\"\r\n                                      process={process}\r\n                                      session={session}\r\n                                      isCoach={isCoach}\r\n                                      />\r\n\r\n                        {!isCoach && (session.Status >= 10) ? <div className=\"mb-5 text-center\">\r\n                            <div className=\"row\">\r\n                                <div className=\"col-md-6\">\r\n                                    <div className=\"ilv-card\" style={{backgroundColor: CommitmentBg}}>\r\n                                        <div className=\"ilv-card-body text-center\">\r\n                                            <span>{Messages.get(\"LabelCommitment\")}</span>\r\n                                            <input className=\"ilv-form-control mt-2\" type=\"number\" ref=\"rate-commitment\" defaultValue={session.Commitment} min=\"0\" max=\"10\" />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"col-md-6\">\r\n                                    <div className=\"ilv-card\" style={{backgroundColor: FeedbackBg}}>\r\n                                        <div className=\"ilv-card-body text-center\">\r\n                                            <span>{Messages.get(\"LabelFeedback\")}</span>\r\n                                            <input className=\"ilv-form-control mt-2\" type=\"number\" ref=\"rate-feedback\" defaultValue={session.Rating} min=\"0\" max=\"10\" />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <button className=\"ilv-btn ilv-btn-sm ilv-btn-primary\" onClick={this.saveEvaluation}>{Messages.get(\"LabelSave\")}</button>\r\n                        </div>:\"\"}\r\n\r\n                        <SessionCharts process={process} />\r\n                        \r\n                        <SessionHistory sessions={process.Sessions} current={sessionIndex} onChange={this.selectSession} />\r\n\r\n                        </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n});\r\n\r\n"]}
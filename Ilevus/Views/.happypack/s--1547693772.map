{"version":3,"sources":["src\\store\\gtm\\sagas.js"],"names":["track","startGTM","watchAllActions","watchGTMStart","actions","type","gtm","payload","event","label","window","dataLayer","push","gtmFailure","gtmId","Date","getTime","meta","GTM_START"],"mappings":";;;;;QAMiBA,K,GAAAA,K;QAYAC,Q,GAAAA,Q;QAcAC,e,GAAAA,e;QAOAC,a,GAAAA,a;;AArCjB;;;;AACA;;AACA;;IAAYC,O;;;;;;mDAEKJ,K;oDAYAC,Q;oDAcAC,e;oDAOAC,a,GAvCjB;AACA;;;AAKO,SAAUH,KAAV,CAAgBK,IAAhB;AAAA,iFAAgC,EAAhC;AAAA,MAAwBC,GAAxB,QAAwBA,GAAxB;;AAAA;AAAA;AAAA;AAAA;AAAA;AACCC,iBADD,GACW,EAAEC,OAAOH,IAAT,EAAeI,OAAOH,GAAtB,EADX;AAAA;;AAGH;AACAI,iBAAOC,SAAP,GAAmBD,OAAOC,SAAP,IAAoB,EAAvC;AACAD,iBAAOC,SAAP,CAAiBC,IAAjB,CAAsBL,OAAtB;AALG;AAAA,iBAMGA,OANH;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,iBAQG,kBAAIH,QAAQS,UAAR,cAAsBN,OAAtB,CAAJ,CARH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAYA,SAAUN,QAAV;AAAA,MAAqBa,KAArB,SAAqBA,KAArB;AAAA;AAAA;AAAA;AAAA;AAAA;;AAEH;AACAJ,iBAAOC,SAAP,GAAmBD,OAAOC,SAAP,IAAoB,EAAvC;AACAD,iBAAOC,SAAP,CAAiBC,IAAjB,CAAsB;AACpBJ,mBAAO,QADa;AAEpB,yBAAa,IAAIO,IAAJ,GAAWC,OAAX;AAFO,WAAtB;AAJG;AAAA,iBAQG,yFAAyDF,KAAzD,CARH;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,iBAUG,kBAAIV,QAAQS,UAAR,eAAsB,EAAEC,YAAF,EAAtB,CAAJ,CAVH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAcA,SAAUZ,eAAV;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,eACE,IADF;AAAA;AAAA;AAAA;;AAAA;AAAA,iBAE0B,mBAAK,GAAL,CAF1B;;AAAA;AAAA;AAEKG,cAFL,SAEKA,IAFL;AAEWY,cAFX,SAEWA,IAFX;AAAA;AAAA,iBAGG,mBAAKjB,KAAL,EAAYK,IAAZ,EAAkBY,IAAlB,CAHH;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAOA,SAAUd,aAAV;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBACqB,mBAAKC,QAAQc,SAAb,CADrB;;AAAA;AAAA;AACGX,iBADH,SACGA,OADH;AAAA;AAAA,iBAEC,kBAAI,CACR,mBAAKN,QAAL,EAAeM,OAAf,CADQ,EAER,mBAAKL,eAAL,CAFQ,CAAJ,CAFD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;oDAQQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBACP,mBAAKC,aAAL,CADO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,C;;;;;;;;;;gCAzCEH,K;;gCAYAC,Q;;gCAcAC,e;;gCAOAC,a","file":"sagas.js","sourceRoot":"C:/Projetos/Nova pasta/ilevus/Ilevus/Views","sourcesContent":["// https://github.com/diegohaz/arc/wiki/Sagas\n// https://github.com/diegohaz/arc/wiki/Example-redux-modules#gtm\nimport loadScript from 'simple-load-script'\nimport { all, take, put, call, fork } from 'redux-saga/effects'\nimport * as actions from './actions'\n\nexport function* track(type, { gtm } = {}) {\n  const payload = { event: type, label: gtm }\n  try {\n    // istanbul ignore next\n    window.dataLayer = window.dataLayer || []\n    window.dataLayer.push(payload)\n    yield payload\n  } catch (e) {\n    yield put(actions.gtmFailure(e, payload))\n  }\n}\n\nexport function* startGTM({ gtmId }) {\n  try {\n    // istanbul ignore next\n    window.dataLayer = window.dataLayer || []\n    window.dataLayer.push({\n      event: 'gtm.js',\n      'gtm.start': new Date().getTime(),\n    })\n    yield call(loadScript, `//www.googletagmanager.com/gtm.js?id=${gtmId}`)\n  } catch (e) {\n    yield put(actions.gtmFailure(e, { gtmId }))\n  }\n}\n\nexport function* watchAllActions() {\n  while (true) {\n    const { type, meta } = yield take('*')\n    yield call(track, type, meta)\n  }\n}\n\nexport function* watchGTMStart() {\n  const { payload } = yield take(actions.GTM_START)\n  yield all([\n    call(startGTM, payload),\n    call(watchAllActions),\n  ])\n}\n\nexport default function* () {\n  yield fork(watchGTMStart)\n}\n"]}
{"version":3,"sources":["legacy\\jsx\\core\\view\\admin\\AdminPanelAds.jsx"],"names":["S","require","$","_","moment","React","Link","Toastr","AdStore","UserSession","LoadingGauge","AdForm","Messages","module","exports","createClass","contextTypes","router","PropTypes","object","getInitialState","loading","ads_balance","ads","adding","editing","componentDidMount","me","on","setState","dispatch","action","ACTION_RETRIEVE_ADS","data","ACTION_RETRIEVE_ADS_BALANCE","componentWillUnmount","off","onNewAd","event","preventDefault","onAddCredit","alert","onEditingAd","ad","adCancel","adSaved","remove","success","get","renderAds","state","length","map","index","bind","Headline","Active","Views","Hits","renderAdsCredit","adsBalance","parseFloat","Balance","toFixed","render"],"mappings":"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","file":"AdminPanelAds.jsx","sourceRoot":"C:/Projetos/Nova pasta/ilevus/Ilevus/Views","sourcesContent":["var S = require(\"string\");\r\nvar $ = require(\"jquery\");\r\nvar _ = require(\"underscore\");\r\nvar moment = require(\"moment\");\r\nvar React = require(\"react\");\r\nvar Link = require(\"react-router\").Link;\r\nvar Toastr = require(\"toastr\");\r\n\r\nvar AdStore = require(\"ilevus/jsx/core/store/Ad.jsx\");\r\nvar UserSession = require(\"ilevus/jsx/core/store/UserSession.jsx\");\r\n\r\nvar LoadingGauge = require(\"ilevus/jsx/core/widget/LoadingGauge.jsx\");\r\n//var LoadingGauge = require(\"ilevus/jsx/core/widget/LoadingGauge.jsx\");\r\nvar AdForm = require(\"ilevus/jsx/core/widget/admin/AdForm.jsx\");\r\n\r\n//var Modal = require(\"ilevus/jsx/core/widget/Modal.jsx\");\r\n\r\nvar Messages = require(\"ilevus/jsx/core/util/Messages.jsx\");\r\n\r\nmodule.exports = React.createClass({\r\n    contextTypes: {\r\n        router: React.PropTypes.object\r\n    },\r\n    getInitialState() {\r\n        return {\r\n            loading: true,\r\n            ads_balance: null,\r\n            ads: null,\r\n            adding: false,\r\n            editing: null\r\n        };\r\n    },\r\n    componentDidMount() {\r\n        var me = this;\r\n        AdStore.on(\"retrieve-ads-balance\", (ads_balance) => {\r\n            me.setState({\r\n                ads_balance: ads_balance,\r\n                loading: false\r\n            });\r\n        }, me);\r\n\r\n        AdStore.on(\"retrieve-ads\", (ads) => {\r\n            me.setState({\r\n                ads: ads,\r\n                loading: false\r\n            });\r\n        }, me);\r\n\r\n        AdStore.dispatch({\r\n            action: AdStore.ACTION_RETRIEVE_ADS,\r\n            data: {}\r\n        });\r\n\r\n        AdStore.dispatch({\r\n            action: AdStore.ACTION_RETRIEVE_ADS_BALANCE,\r\n            data: {}\r\n        });\r\n        /*AdStore.dispatch({\r\n            action: AdStore.ACTION_RETRIEVE_ADS,\r\n            data: {}\r\n        });*/\r\n\r\n        /*AdStore.dispatch({\r\n            action: AdStore.ACTION_RETRIEVE_ADS,\r\n            data: {}\r\n        });*/\r\n    },\r\n    componentWillUnmount() {\r\n        AdStore.off(null, null, this);\r\n    },\r\n\r\n    onNewAd(event) {\r\n        event && event.preventDefault();\r\n        this.setState({\r\n            adding: true,\r\n            editing: null\r\n        });\r\n    },\r\n\r\n    onAddCredit(event) {\r\n        event && event.preventDefault();\r\n        /*this.setState({\r\n            adding: true,\r\n            editing: null\r\n        });*/\r\n        alert('adicionar crédito!');\r\n    },\r\n\r\n\r\n    onEditingAd(ad, event) {\r\n        event && event.preventDefault();\r\n        this.setState({\r\n            adding: false,\r\n            editing: ad\r\n        });\r\n    },\r\n\r\n    adCancel() {\r\n        this.setState({\r\n            adding: false,\r\n            editing: null\r\n        });\r\n    },\r\n    adSaved(ad) {\r\n        Toastr.remove();\r\n        Toastr.success(Messages.get(\"TextAdSavedSuccessfully\"));\r\n        this.setState({\r\n            loading: false,\r\n            adding: false,\r\n            editing: null\r\n        });\r\n        AdStore.dispatch({\r\n            action: AdStore.ACTION_RETRIEVE_ADS,\r\n            data: {}\r\n        });\r\n    },\r\n\r\n\r\n    renderAds() {\r\n        if (this.state.ads) {\r\n            return <i>Carregando anúncios.</i>;\r\n        }\r\n        if (this.state.ads.length == 0) {\r\n            return <i>Nenhum anúncio cadastrado ainda.</i>;\r\n        }\r\n        return (<table className=\"ilv-table ilv-table-sm ilv-table-middle ilv-text-sm\">\r\n            <thead>\r\n                <tr>\r\n                    <th>{Messages.get(\"LabelHeadline\")}</th>\r\n                    <th>{Messages.get(\"LabelStatus\")}</th>\r\n                    <th>{Messages.get(\"LabelViews\")}</th>\r\n                    <th>{Messages.get(\"LabelClicks\")}</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                {this.state.ads.map((ad, index) =>\r\n                    <tr key={\"ad-list-\"+index}>\r\n                        <td>\r\n                            <a onClick={this.onEditingAd.bind(this, ad)}>{ad.Headline}\r\n                            </a>\r\n                        </td>\r\n                        <td>\r\n                            {(ad.Active ? <i className='fa fa-thumbs-o-up'> </i> : <i className='fa fa-thumbs-o-down'> </i>)}\r\n                        </td>\r\n                        <td>{ad.Views}</td>\r\n                        <td>{ad.Hits}</td>\r\n                    </tr>\r\n                )}\r\n            </tbody>\r\n        </table>);\r\n    },\r\n    renderAdsCredit() {\r\n        if (!this.state.ads_balance || this.state.ads_balance.length == 0) {\r\n            return <i>{Messages.get(\"LabelNoCreditBalance\")}</i>;\r\n        }        \r\n        return (<table className=\"ilv-table ilv-table-sm ilv-table-middle ilv-text-sm\">\r\n            <thead>\r\n                <tr>\r\n                    <th>{Messages.get(\"LabelHeadlineCredit\")}</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                {this.state.ads_balance.map((adsBalance, index) =>\r\n                    <tr key={\"ad-list-\"+index}>\r\n                        <td>{parseFloat(adsBalance.Balance).toFixed(2)}</td>\r\n                    </tr>\r\n                )}\r\n            </tbody>\r\n        </table>);\r\n    },\r\n    render () {\r\n        if (this.state.loading)\r\n            return <LoadingGauge />;\r\n        if (this.state.adding)\r\n            return <AdForm onSubmit={this.adSaved} onCancel={this.adCancel} />;\r\n        if (this.state.editing)\r\n            return <AdForm onSubmit={this.adSaved} onCancel={this.adCancel } ad={this.state.editing} />;\r\n\r\n        return (\r\n            <div>\r\n            <div className=\"ilv-card\">\r\n                <div className=\"ilv-card-header\">\r\n                    <strong>{Messages.get(\"LabelAdsCredit\")}\r\n                        <button className=\"float-right ilv-btn ilv-btn-sm ilv-btn-primary\" onClick={this.onAddCredit}>{Messages.get(\"LabelAddMoreCredit\")}\r\n                        </button>\r\n                    </strong>\r\n                </div>\r\n                <div className=\"ilv-card-body\">{this.renderAdsCredit()}\r\n                </div>\r\n            </div>\r\n            <div className=\"ilv-card\">\r\n                <div className=\"ilv-card-header\">\r\n                    <strong>{Messages.get(\"LabelAds\")}\r\n                        <button className=\"float-right ilv-btn ilv-btn-sm ilv-btn-primary\" onClick={this.onNewAd}>{Messages.get(\"LabelNewAd\")}\r\n                        </button>\r\n                    </strong>\r\n                </div>\r\n                <div className=\"ilv-card-body\">{this.renderAds()}\r\n                </div>\r\n            </div>\r\n            </div>\r\n            );\r\n    }\r\n});\r\n"]}
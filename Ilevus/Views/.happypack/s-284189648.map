{"version":3,"sources":["legacy\\jsx\\core\\widget\\user\\ServiceForm.jsx"],"names":["React","require","S","Toastr","Messages","CurrencyUtils","module","exports","createClass","propTypes","service","PropTypes","object","isRequired","onSubmit","func","onCancel","getDefaultProps","getInitialState","edit","props","Name","sellPrice","calcFinalPrice","Price","price","event","preventDefault","name","refs","value","isEmpty","remove","error","formatWithKeys","data","escapeHTML","s","state","percMoip","percImpMoip","mktDir","comIle","calc","format","handleChange","maskedValue","setState","render","currencyConfig","locale","formats","number","BRL","style","currency","minimumFractionDigits","maximumFractionDigits","get"],"mappings":"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","file":"ServiceForm.jsx","sourceRoot":"C:/Projetos/Nova pasta/ilevus/Ilevus/Views","sourcesContent":["var React = require(\"react\");\r\nvar S = require(\"string\");\r\nvar Toastr = require(\"toastr\");\r\n\r\nvar Messages = require(\"ilevus/jsx/core/util/Messages.jsx\");\r\nvar CurrencyUtils = require(\"ilevus/jsx/core/util/CurrencyUtils.jsx\");\r\nimport IntlCurrencyInput from \"react-intl-currency-input\"\r\n\r\n\r\nmodule.exports = React.createClass({\r\n    propTypes: {\r\n        service: React.PropTypes.object.isRequired,\r\n        onSubmit: React.PropTypes.func.isRequired,\r\n        onCancel: React.PropTypes.func.isRequired\r\n    },\r\n    getDefaultProps() {\r\n        return { service: {} };\r\n    },\r\n    getInitialState() {\r\n        return {\r\n            edit: !!this.props.service.Name,\r\n            sellPrice: this.calcFinalPrice(this.props.service.Price),\r\n            price: this.props.service.Price\r\n        };\r\n    },\r\n    onSubmit(event) {\r\n        event.preventDefault();\r\n        var name = S(this.refs['field-name'].value);\r\n        if (name.isEmpty()) {\r\n            Toastr.remove();\r\n            Toastr.error(Messages.formatWithKeys(\"ValidationRequired\", ['LabelService']));\r\n            return;\r\n        }\r\n        var data = {\r\n            Name: name.escapeHTML().s,\r\n            Price: this.state.price\r\n        };\r\n        this.props.onSubmit(data);\r\n    },\r\n    onCancel(event) {\r\n        event.preventDefault();\r\n        this.props.onCancel();\r\n    },\r\n    calcFinalPrice(value) {\r\n        if (!value) {\r\n            return 'R$ 0';\r\n        }\r\n        var percMoip = value * 0.0549;\r\n        var percImpMoip = percMoip * 0.15;\r\n        var mktDir = 29.90;\r\n        var comIle = 1.15;\r\n        var calc = percMoip + percImpMoip + mktDir + comIle + (value * 1);\r\n        var sellPrice = CurrencyUtils.format(calc);\r\n        return sellPrice;\r\n    },\r\n    handleChange(event, value, maskedValue) {\r\n        this.setState({\r\n            sellPrice: this.calcFinalPrice(value) || 0,\r\n            price: value\r\n        });\r\n    },\r\n    render() {\r\n        const currencyConfig = {\r\n            locale: \"pt-BR\",\r\n            formats: {\r\n                number: {\r\n                    BRL: {\r\n                        style: \"currency\",\r\n                        currency: \"BRL\",\r\n                        minimumFractionDigits: 2,\r\n                        maximumFractionDigits: 2,\r\n                    },\r\n                },\r\n            },\r\n        };\r\n        return (\r\n            <form onSubmit={this.onSubmit}>\r\n                <fieldset className=\"ilv-form-group\">\r\n                    <label className=\"ilv-form-label\" htmlFor=\"serviceName\">\r\n                        {Messages.get(\"LabelService\")}\r\n                    </label>\r\n                    <input\r\n                        className=\"ilv-form-control\"\r\n                        type=\"text\"\r\n                        spellCheck={false}\r\n                        id=\"serviceName\"\r\n                        ref=\"field-name\"\r\n                        defaultValue={this.props.service.Name} />\r\n                </fieldset>\r\n\r\n                <fieldset className=\"ilv-form-group\">\r\n                    <label className=\"ilv-form-label\" htmlFor=\"servicePrice\">\r\n                        {Messages.get(\"LabelPrice\")}\r\n                    </label>\r\n\r\n                    <IntlCurrencyInput currency=\"BRL\"\r\n                        config={currencyConfig}\r\n                        onChange={this.handleChange}\r\n                        defaultValue={this.props.service.Price} />\r\n                </fieldset>\r\n\r\n                <fieldset className=\"ilv-form-group\">\r\n                    <label className=\"ilv-form-label\" htmlFor=\"serviceSellPrice\">\r\n                        {Messages.get(\"LabelSellPrice\")}\r\n                    </label>\r\n                    <input\r\n                        className=\"ilv-form-control\"\r\n                        type=\"text\"\r\n                        disabled=\"disabled\"\r\n                        id=\"serviceSellPrice\"\r\n                        ref=\"field-sell-price\"\r\n                        value={this.state.sellPrice} />\r\n                </fieldset>\r\n\r\n                <input\r\n                    type=\"submit\"\r\n                    className=\"ilv-btn ilv-btn-block ilv-btn-primary\"\r\n                    value={this.state.edit\r\n                        ? Messages.get(\"ActionSaveOfferedService\")\r\n                        : Messages.get(\"ActionAddNewOfferedService\")} />\r\n                <button className=\"ilv-btn ilv-btn-block ilv-btn-clean\" onClick={this.onCancel}>\r\n                    {Messages.get(\"LabelCancel\")}\r\n                </button>\r\n            </form>\r\n        );\r\n    }\r\n});\r\n"]}
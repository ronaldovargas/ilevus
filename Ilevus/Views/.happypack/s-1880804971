
var _ = require("underscore");
var S = require("string");
var marked = require("marked");
var React = require('react');

var Messages = require("ilevus/jsx/core/util/Messages.jsx");

module.exports = React.createClass({
    displayName: "exports",

    propTypes: {
        label: React.PropTypes.string.isRequired,
        value: React.PropTypes.string,
        onChange: React.PropTypes.func.isRequired,
        editable: React.PropTypes.bool.isRequired
    },
    getDefaultProps: function getDefaultProps() {
        return {
            editable: true,
            onChange: _.noop
        };
    },
    getInitialState: function getInitialState() {
        return {
            editing: false
        };
    },
    tweakEditing: function tweakEditing(event) {
        event && event.preventDefault();
        this.setState(function (prev) {
            return { editing: !prev.editing };
        });
    },
    saveEdit: function saveEdit(event) {
        event && event.preventDefault();
        this.props.onChange(this.refs["textarea"].value);
        this.tweakEditing();
    },
    render: function render() {
        var value = S(this.props.value);
        return !this.state.editing ? React.createElement(
            "div",
            null,
            React.createElement(
                "h4",
                { className: "ilv-font-weight-semibold my-3" },
                this.props.label,
                ":"
            ),
            value.isEmpty() ? React.createElement(
                "p",
                null,
                React.createElement(
                    "i",
                    null,
                    Messages.get("TextNoFilledContent")
                )
            ) : React.createElement("div", { dangerouslySetInnerHTML: { __html: marked(value.s) } }),
            this.props.editable ? React.createElement(
                "a",
                { className: "font-weight-bold", onClick: this.tweakEditing, href: "#" },
                Messages.get('LabelEdit')
            ) : ""
        ) : React.createElement(
            "div",
            null,
            React.createElement(
                "h4",
                { className: "ilv-font-weight-semibold my-3" },
                this.props.label,
                ":"
            ),
            React.createElement("textarea", { className: "ilv-form-control mb-2", ref: "textarea", style: { minHeight: '150px' }, defaultValue: value.s }),
            React.createElement(
                "button",
                { className: "ilv-btn ilv-btn-primary", onClick: this.saveEdit },
                Messages.get("LabelSave")
            ),
            React.createElement(
                "button",
                { className: "ilv-btn ilv-btn-sm ilv-btn-clean", onClick: this.tweakEditing },
                Messages.get("LabelCancel")
            )
        );
    }
});
;

var _temp = function () {
    if (typeof __REACT_HOT_LOADER__ === 'undefined') {
        return;
    }
}();

;
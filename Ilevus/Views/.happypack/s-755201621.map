{"version":3,"sources":["src\\store\\gtm\\sagas.js"],"names":["track","startGTM","watchAllActions","watchGTMStart","actions","type","gtm","payload","event","label","window","dataLayer","push","gtmFailure","gtmId","Date","getTime","meta","GTM_START"],"mappings":";;;;;QAMiBA,K,GAAAA,K;QAYAC,Q,GAAAA,Q;QAcAC,e,GAAAA,e;QAOAC,a,GAAAA,a;;AArCjB;;;;AACA;;AACA;;IAAYC,O;;;;;;mDAEKJ,K;oDAYAC,Q;oDAcAC,e;oDAOAC,a,GAvCjB;AACA;;;AAKO,SAAUH,KAAV,CAAgBK,IAAhB;AAAA,iFAAgC,EAAhC;AAAA,MAAwBC,GAAxB,QAAwBA,GAAxB;;AAAA;AAAA;AAAA;AAAA;AAAA;AACCC,iBADD,GACW,EAAEC,OAAOH,IAAT,EAAeI,OAAOH,GAAtB,EADX;AAAA;;AAGH;AACAI,iBAAOC,SAAP,GAAmBD,OAAOC,SAAP,IAAoB,EAAvC;AACAD,iBAAOC,SAAP,CAAiBC,IAAjB,CAAsBL,OAAtB;AALG;AAAA,iBAMGA,OANH;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,iBAQG,kBAAIH,QAAQS,UAAR,cAAsBN,OAAtB,CAAJ,CARH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAYA,SAAUN,QAAV;AAAA,MAAqBa,KAArB,SAAqBA,KAArB;AAAA;AAAA;AAAA;AAAA;AAAA;;AAEH;AACAJ,iBAAOC,SAAP,GAAmBD,OAAOC,SAAP,IAAoB,EAAvC;AACAD,iBAAOC,SAAP,CAAiBC,IAAjB,CAAsB;AACpBJ,mBAAO,QADa;AAEpB,yBAAa,IAAIO,IAAJ,GAAWC,OAAX;AAFO,WAAtB;AAJG;AAAA,iBAQG,yFAAyDF,KAAzD,CARH;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,iBAUG,kBAAIV,QAAQS,UAAR,eAAsB,EAAEC,YAAF,EAAtB,CAAJ,CAVH;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAcA,SAAUZ,eAAV;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,eACE,IADF;AAAA;AAAA;AAAA;;AAAA;AAAA,iBAE0B,mBAAK,GAAL,CAF1B;;AAAA;AAAA;AAEKG,cAFL,SAEKA,IAFL;AAEWY,cAFX,SAEWA,IAFX;AAAA;AAAA,iBAGG,mBAAKjB,KAAL,EAAYK,IAAZ,EAAkBY,IAAlB,CAHH;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAOA,SAAUd,aAAV;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBACqB,mBAAKC,QAAQc,SAAb,CADrB;;AAAA;AAAA;AACGX,iBADH,SACGA,OADH;AAAA;AAAA,iBAEC,kBAAI,CACR,mBAAKN,QAAL,EAAeM,OAAf,CADQ,EAER,mBAAKL,eAAL,CAFQ,CAAJ,CAFD;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;oDAQQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBACP,mBAAKC,aAAL,CADO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,C;;;;;;;;;;gCAzCEH,K;;gCAYAC,Q;;gCAcAC,e;;gCAOAC,a","file":"sagas.js","sourceRoot":"C:/Projetos/Nova pasta/ilevus/Ilevus/Views","sourcesContent":["// https://github.com/diegohaz/arc/wiki/Sagas\r\n// https://github.com/diegohaz/arc/wiki/Example-redux-modules#gtm\r\nimport loadScript from 'simple-load-script'\r\nimport { all, take, put, call, fork } from 'redux-saga/effects'\r\nimport * as actions from './actions'\r\n\r\nexport function* track(type, { gtm } = {}) {\r\n  const payload = { event: type, label: gtm }\r\n  try {\r\n    // istanbul ignore next\r\n    window.dataLayer = window.dataLayer || []\r\n    window.dataLayer.push(payload)\r\n    yield payload\r\n  } catch (e) {\r\n    yield put(actions.gtmFailure(e, payload))\r\n  }\r\n}\r\n\r\nexport function* startGTM({ gtmId }) {\r\n  try {\r\n    // istanbul ignore next\r\n    window.dataLayer = window.dataLayer || []\r\n    window.dataLayer.push({\r\n      event: 'gtm.js',\r\n      'gtm.start': new Date().getTime(),\r\n    })\r\n    yield call(loadScript, `//www.googletagmanager.com/gtm.js?id=${gtmId}`)\r\n  } catch (e) {\r\n    yield put(actions.gtmFailure(e, { gtmId }))\r\n  }\r\n}\r\n\r\nexport function* watchAllActions() {\r\n  while (true) {\r\n    const { type, meta } = yield take('*')\r\n    yield call(track, type, meta)\r\n  }\r\n}\r\n\r\nexport function* watchGTMStart() {\r\n  const { payload } = yield take(actions.GTM_START)\r\n  yield all([\r\n    call(startGTM, payload),\r\n    call(watchAllActions),\r\n  ])\r\n}\r\n\r\nexport default function* () {\r\n  yield fork(watchGTMStart)\r\n}\r\n"]}
/**
    Esta é a store da entidade de Usuário do sistema.
*/

var Fluxbone = require("ilevus/jsx/core/store/Fluxbone.jsx");
var Messages = require("ilevus/jsx/core/util/Messages.jsx");
var S = require("string");

var URL = Fluxbone.BACKEND_URL + "Ad";

var AdModel = Fluxbone.Model.extend({
    url: URL,
    validate: function validate(attrs, options) {
        var errors = [];

        if (errors.length > 0) return errors;
    }
});

var AdStore = Fluxbone.Store.extend({

    ACTION_RETRIEVE_ADS_BALANCE: 'ad-retrieveAdsBalance',

    ACTION_RETRIEVE_ADS: 'ad-retrieveAds',
    ACTION_SAVE: 'ad-saveAd',

    ACTION_SEARCH_ADS: 'ad-searchAds',
    ACTION_SEARCH_MOBILE_ADS: 'ad-searchMobileAds',

    ACTION_CHECK_MODERATIONS_ADS: 'ad-checkModerationsAds',
    ACTION_RETRIEVE_MODERATIONS_ADS: 'ad-retrieveModerationsAds',

    ACTION_LEAVE_MODERATION: 'ad-leaveModerationsAds',
    ACTION_CATCH_MODERATION: 'ad-catchModerationsAds',
    ACTION_SAVE_MODERATION: 'ad-saveModerationsAds',

    ACTION_COUNT_PREVIEWS_MODERATION: 'ad-getCountPreviewsModeration',

    dispatchAcceptRegex: /^ad-[a-zA-Z0-9]+$/,

    url: URL,
    model: AdModel,

    retrieveAdsBalance: function retrieveAdsBalance(params) {
        var me = this;
        $.ajax({
            method: "GET",
            url: me.url + "/RetrieveBalance",
            dataType: 'json',
            success: function success(data, status, opts) {
                me.trigger("retrieve-ads-balance", data);
            },
            error: function error(opts, status, errorMsg) {
                me.handleRequestErrors([], opts);
            }
        });
    },


    //

    retrieveAds: function retrieveAds(params) {
        var me = this;
        $.ajax({
            method: "GET",
            url: me.url + "/Retrieve",
            dataType: 'json',
            success: function success(data, status, opts) {
                me.trigger("retrieve-ads", data);
            },
            error: function error(opts, status, errorMsg) {
                me.handleRequestErrors([], opts);
            }
        });
    },
    saveAd: function saveAd(params) {
        var me = this;
        $.ajax({
            method: "POST",
            url: me.url + "/Save",
            dataType: 'json',
            data: JSON.stringify(params),
            contentType: "application/json",
            traditional: true,
            success: function success(data, status, opts) {
                me.trigger("save-ad", data);
            },
            error: function error(opts, status, errorMsg) {
                me.handleRequestErrors([], opts);
            }
        });
    },
    searchAds: function searchAds(params) {
        var me = this;
        $.ajax({
            method: "GET",
            url: me.url + "/Search",
            dataType: 'json',
            data: { Keyword: params.keyword, Limit: params.limit, isMobile: params.isMobile },
            success: function success(data, status, opts) {
                me.trigger("search-ads", data);
            },
            error: function error(opts, status, errorMsg) {
                me.handleRequestErrors([], opts);
            }
        });
    },
    searchMobileAds: function searchMobileAds(params) {
        var me = this;
        $.ajax({
            method: "GET",
            url: me.url + "/Search",
            dataType: 'json',
            data: { Keyword: params.keyword, Limit: params.limit, isMobile: params.isMobile },
            success: function success(data, status, opts) {
                me.trigger("search-mobile-ads", data);
            },
            error: function error(opts, status, errorMsg) {
                me.handleRequestErrors([], opts);
            }
        });
    },
    checkModerationsAds: function checkModerationsAds(params) {
        var me = this;
        $.ajax({
            method: "GET",
            url: me.url + "/CheckPendingModerations",
            dataType: 'json',
            success: function success(data, status, opts) {
                me.trigger("check-moderation-ads", data);
            },
            error: function error(opts, status, errorMsg) {
                me.handleRequestErrors([], opts);
            }
        });
    },
    retrieveModerationsAds: function retrieveModerationsAds(params) {
        var me = this;
        $.ajax({
            method: "GET",
            url: me.url + "/RetrievePendingModerations",
            dataType: 'json',
            success: function success(data, status, opts) {
                me.trigger("retrieve-moderation-ads", data);
            },
            error: function error(opts, status, errorMsg) {
                me.handleRequestErrors([], opts);
            }
        });
    },
    catchModerationsAds: function catchModerationsAds(params) {
        var me = this;
        $.ajax({
            method: "GET",
            url: me.url + "/CatchAdModeration",
            dataType: 'json',
            data: { Id: params.Id, Status: params.Status },
            success: function success(data, status, opts) {
                me.trigger("catch-moderation-ad", data);
            },
            error: function error(opts, status, errorMsg) {
                me.handleRequestErrors([], opts);
            }
        });
    },
    saveModerationsAds: function saveModerationsAds(params) {
        var me = this;
        $.ajax({
            method: "GET",
            url: me.url + "/SaveAdModeration",
            dataType: 'json',
            data: { Id: params.Id, Status: params.Status },
            success: function success(data, status, opts) {
                me.trigger("save-moderation-ad", data);
            },
            error: function error(opts, status, errorMsg) {
                me.handleRequestErrors([], opts);
            }
        });
    },
    leaveModerationsAds: function leaveModerationsAds(params) {
        var me = this;
        $.ajax({
            method: "GET",
            url: me.url + "/LeaveAdModeration",
            dataType: 'json',
            data: { Id: params.Id },
            success: function success(data, status, opts) {
                me.trigger("leave-moderation-ad", data);
            },
            error: function error(opts, status, errorMsg) {
                me.handleRequestErrors([], opts);
            }
        });
    },
    getCountPreviewsModeration: function getCountPreviewsModeration(params) {
        var me = this;
        $.ajax({
            method: "GET",
            url: me.url + "/CountPreviewsModeration",
            dataType: 'json',
            //data: { Id: params.Id },
            success: function success(data, status, opts) {
                me.trigger("count-previews-moderation-ad", data);
            },
            error: function error(opts, status, errorMsg) {
                me.handleRequestErrors([], opts);
            }
        });
    }
});

module.exports = new AdStore();
;

var _temp = function () {
    if (typeof __REACT_HOT_LOADER__ === 'undefined') {
        return;
    }

    __REACT_HOT_LOADER__.register(URL, "URL", "C:/Projetos/Nova pasta/ilevus/Ilevus/Views/legacy/jsx/core/store/Ad.jsx");

    __REACT_HOT_LOADER__.register(AdModel, "AdModel", "C:/Projetos/Nova pasta/ilevus/Ilevus/Views/legacy/jsx/core/store/Ad.jsx");

    __REACT_HOT_LOADER__.register(AdStore, "AdStore", "C:/Projetos/Nova pasta/ilevus/Ilevus/Views/legacy/jsx/core/store/Ad.jsx");
}();

;
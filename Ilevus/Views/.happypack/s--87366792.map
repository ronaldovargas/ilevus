{"version":3,"sources":["legacy\\jsx\\core\\widget\\admin\\AdModal.jsx"],"names":["_","require","$","React","ReactDOM","Messages","Modal","EL","document","getElementById","AlertModal","createClass","render","props","title","message","FileUploadModalAd","border","ModalAd","$el","hide","jQuery","modal","defer","show","backdrop","keyboard","alert","msg","mostrar","limit_size","targetField","isModal","me","click","change","uplField","file","files","size","txtErro","get","replace","html","val","reader","FileReader","readAsDataURL","onload","e","tmpImg","Image","src","window","URL","createObjectURL","naturalWidth","naturalHeight","length","img","attr","target","result","css","appendTo","onerror","error","text","module","exports"],"mappings":"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","file":"AdModal.jsx","sourceRoot":"C:/Projetos/Nova pasta/ilevus/Ilevus/Views","sourcesContent":["var _ = require('underscore');\r\nvar $ = require('jquery');\r\nvar React = require('react');\r\nvar ReactDOM = require('react-dom');\r\n\r\nvar Messages = require(\"ilevus/jsx/core/util/Messages.jsx\");\r\nvar Modal = require(\"ilevus/jsx/core/widget/admin/AdModal.jsx\");\r\n\r\nvar EL = document.getElementById(\"main-global-modal\");\r\n\r\nvar AlertModal = React.createClass({\r\n    render() {\r\n        return (\r\n\t\t\t<div className=\"modal-dialog modal-sm\">\r\n\t\t\t\t<div className=\"modal-content\">\r\n\t\t\t\t\t<div className=\"modal-header\">\r\n\t        \t\t\t<a className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></a>\r\n\t        \t\t\t<h4 className=\"modal-title\" id=\"myModalLabel\">{this.props.title}</h4>\r\n\t\t\t\t\t</div>\r\n\t      \t\t\t<div className=\"modal-body\">{this.props.message}\r\n\t      \t\t\t</div>\r\n\t      \t\t\t<div className=\"modal-footer\">\r\n\t        \t\t\t<button type=\"button\" className=\"ilv-btn ilv-btn-primary ilv-btn-sm\" data-dismiss=\"modal\">Ok</button>\r\n\t      \t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n    }\r\n});\r\n\r\nvar FileUploadModalAd = React.createClass({\r\n    render() {\r\n        return (\r\n\t\t\t<div className=\"modal-dialog\">\r\n\t\t\t\t<div className=\"modal-content\">\r\n\t\t\t\t\t<div className=\"modal-header\">\r\n\t        \t\t\t<button type=\"button\" id=\"modalAdClose\" className=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>\r\n\t        \t\t\t<h4 className=\"modal-title\" id=\"myModalLabel\">{this.props.title}</h4>\r\n\t\t\t\t\t</div>\r\n\t      \t\t\t<div className=\"modal-body\">\r\n\t        \t\t\t<div>{this.props.message}</div>\r\n\t        \t\t\t<input type='file' name=\"file\" className='form-control' ref=\"file-upload-field\" id=\"file-upload-field\" />\r\n                          <span className=\"text-danger\" id=\"spErrorImage\"></span>\r\n\t      \t\t\t</div>\r\n\t        \t\t<div className=\"panel-footer\">\r\n\t        \t\t\t<div id=\"file-upload-progress\" className=\"progress\" style={{border: '1px solid #ccc'}}>\r\n\t\t        \t\t\t<div className=\"progress-bar progress-bar-success\"></div>\r\n\t        \t\t\t</div>\r\n\t        \t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n}\r\n});\r\n\r\nvar ModalAd = {\r\n    $el: EL,\r\n    hide() {\r\n        jQuery(this.$el).modal(\"hide\");\r\n        _.defer(() => {\r\n            ReactDOM.render((\r\n\t\t\t\t<div></div>\r\n\t\t\t),this.$el);\r\n        });\r\n    },\r\n    show() {\r\n        jQuery(this.$el).modal({\r\n            backdrop: 'static',\r\n            keyboard: false\r\n        });\r\n    },\r\n\r\n    alert(title, msg) {\r\n        ReactDOM.render((\r\n\t\t\t<AlertModal title={title} message={msg} />\r\n\t\t),this.$el);\r\n\t\tjQuery(this.$el).modal('show');\r\n    },\r\n\r\n    mostrar(limit_size, title, msg, targetField, isModal) {\r\n        var me = this;\r\n        ReactDOM.render((\r\n\t\t\t<FileUploadModalAd limit_size={limit_size} isModal={isModal} title={title} message={msg} />\r\n\t\t),this.$el);\r\n        this.show();\r\n\r\n        jQuery(\"#modalAdClose\").click(function () {\r\n            me.hide();\r\n        });\r\n\r\n        jQuery('#file-upload-field').change(function(){\r\n\r\n            var uplField = this;\r\n\r\n            var file = jQuery(uplField)[0].files[0];\r\n\r\n            if (file.size / 1024 > limit_size) {\r\n                var txtErro = Messages.get(\"LabelErrorAdImageSize\");\r\n                txtErro = txtErro.replace(\"{0}\", limit_size + \"Kb\")\r\n                jQuery(\"#spErrorImage\").html(\"<b>\" + txtErro + \"</b>\");\r\n                jQuery(uplField).val(\"\");\r\n            } else {\r\n                var reader = new FileReader();\r\n                reader.readAsDataURL(file);\r\n                reader.onload = function (e) {\r\n\r\n                    var tmpImg = new Image();\r\n                    tmpImg.src = window.URL.createObjectURL(file);\r\n\r\n                    tmpImg.onload = function () {\r\n                        if (!isModal && (tmpImg.naturalWidth != 240 || tmpImg.naturalHeight != 475)) {\r\n                            var txtErro = \"\";\r\n                            txtErro = Messages.get(\"TextAdImageMaxSize\").replace(\"{0}\", \"240px X 475px\");\r\n                            jQuery(\"#spErrorImage\").html(\"<b>\" + txtErro + \"</b>\");\r\n                            jQuery(uplField).val(\"\");\r\n                            return false;\r\n                        } else if (isModal && (tmpImg.naturalWidth != 280 || tmpImg.naturalHeight != 115)) {\r\n                            var txtErro = \"\";\r\n                            txtErro = Messages.get(\"TextAdImageMaxSize\").replace(\"{0}\", \"280px X 115px\");\r\n                            jQuery(\"#spErrorImage\").html(\"<b>\" + txtErro + \"</b>\");\r\n                            jQuery(uplField).val(\"\");\r\n                            return false;\r\n                        } else {\r\n                            if ($(\"#lbl_\" + targetField + \" img\").length > 0) {\r\n                                var img = $(\"#lbl_\" + targetField + \" img\");\r\n                                img.attr('src', e.target.result);\r\n                            } else {\r\n                                var img = $(\"<img>\");\r\n                                img.attr('src', e.target.result).css(\"width\", \"150px\");\r\n                                img.appendTo(\"#lbl_\" + targetField);\r\n                            }\r\n\r\n                            jQuery(\"#\" + targetField).val(reader.result);\r\n\r\n                            me.hide();\r\n                        }\r\n                    }\r\n                    \r\n\r\n                };\r\n                reader.onerror = function (error) {\r\n                    jQuery(\"lbl_\" + targetField).text(\"\");\r\n                    jQuery(\"#\" + targetField).val(\"\");\r\n\r\n                    me.hide();\r\n                };\r\n                \r\n            }\r\n\r\n        });\r\n    }\r\n};\r\n\r\nmodule.exports = ModalAd;"]}
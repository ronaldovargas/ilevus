{"version":3,"sources":["legacy\\jsx\\core\\store\\Financial.jsx"],"names":["Fluxbone","require","UserSession","Messages","S","cartStore","URL","BACKEND_URL","FinancialModel","Model","extend","url","validate","attrs","options","errors","length","FinancialStore","Store","ACTION_RETRIEVE_SUBSCRIPTIONS","ACTION_RETRIEVE_SUBSCRIPTION_DETAIL","ACTION_RETRIEVE_SUBSCRIPTION_INVOICE","ACTION_RETRIEVE_SUBSCRIPTION_INVOICES","ACTION_RETRIEVE_SUBSCRIPTIONS_CUSTOMER","ACTION_RETRIEVE_SUBSCRIPTIONS_CUSTOMERS","ACTION_RETRIEVE_USER_SUBSCRIPTION","ACTION_SUSPEND_USER_SUBSCRIPTION","ACTION_UPDATE_USER_SUBSCRIPTION","ACTION_TO_HIRE_SERVICE","dispatchAcceptRegex","model","retrieveSubscriptions","params","me","$","ajax","method","dataType","success","data","status","opts","trigger","error","errorMsg","handleRequestErrors","retrieveSubscriptionDetail","id","retrieveSubscriptionInvoice","retrieveSubscriptionInvoices","retrieveSubscriptionsCustomer","retrieveSubscriptionsCustomers","retrieveUserSubscription","suspendUserSubscription","get","Premium","updateUserSubscription","Active","Late","toHireService","console","log","getCacheServicesHired","Services","module","exports"],"mappings":"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","file":"Financial.jsx","sourceRoot":"C:/Projetos/Nova pasta/ilevus/Ilevus/Views","sourcesContent":["/**\r\n    Esta é a store da entidade de Usuário do sistema.\r\n*/\r\n\r\nvar Fluxbone = require(\"ilevus/jsx/core/store/Fluxbone.jsx\");\r\nvar UserSession = require(\"ilevus/jsx/core/store/UserSession.jsx\");\r\nvar Messages = require(\"ilevus/jsx/core/util/Messages.jsx\");\r\nvar S = require(\"string\");\r\nvar cartStore = require(\"./Cart.jsx\");\r\nvar URL = Fluxbone.BACKEND_URL + \"Financial\";\r\n\r\nvar FinancialModel = Fluxbone.Model.extend({\r\n\turl: URL,\r\n\tvalidate(attrs, options) {\r\n\t    var errors = [];\r\n\r\n\t\tif (errors.length > 0)\r\n\t\t\treturn errors;\r\n\t}\r\n});\r\n\r\nvar FinancialStore = Fluxbone.Store.extend({\r\n    ACTION_RETRIEVE_SUBSCRIPTIONS: 'financial-retrieveSubscriptions',\r\n    ACTION_RETRIEVE_SUBSCRIPTION_DETAIL: 'financial-retrieveSubscriptionDetail',\r\n    ACTION_RETRIEVE_SUBSCRIPTION_INVOICE: 'financial-retrieveSubscriptionInvoice',\r\n    ACTION_RETRIEVE_SUBSCRIPTION_INVOICES: 'financial-retrieveSubscriptionInvoices',\r\n    ACTION_RETRIEVE_SUBSCRIPTIONS_CUSTOMER: 'financial-retrieveSubscriptionsCustomer',\r\n    ACTION_RETRIEVE_SUBSCRIPTIONS_CUSTOMERS: 'financial-retrieveSubscriptionsCustomers',\r\n    ACTION_RETRIEVE_USER_SUBSCRIPTION: 'financial-retrieveUserSubscription',\r\n    ACTION_SUSPEND_USER_SUBSCRIPTION: 'financial-suspendUserSubscription',\r\n    ACTION_UPDATE_USER_SUBSCRIPTION: 'financial-updateUserSubscription',\r\n    ACTION_TO_HIRE_SERVICE: 'financial-toHireService',\r\n    dispatchAcceptRegex: /^financial-[a-zA-Z0-9]+$/,\r\n\r\n\turl: URL,\r\n\tmodel: FinancialModel,\r\n\r\n\tretrieveSubscriptions(params) {\r\n\t    var me = this;\r\n\t    $.ajax({\r\n\t        method: \"GET\",\r\n\t        url: me.url + \"/Subscriptions\",\r\n\t        dataType: 'json',\r\n\t        success(data, status, opts) {\r\n\t            me.trigger(\"retrieve-subscriptions\", data);\r\n\t        },\r\n\t        error(opts, status, errorMsg) {\r\n\t            me.handleRequestErrors([], opts);\r\n\t        }\r\n\t    });\r\n\t},\r\n\r\n\tretrieveSubscriptionDetail(id) {\r\n\t    var me = this;\r\n\t    $.ajax({\r\n\t        method: \"GET\",\r\n\t        url: me.url + \"/Subscriptions/Detail/\" + id,\r\n\t        dataType: 'json',\r\n\t        success(data, status, opts) {\r\n\t            me.trigger(\"retrieve-subscription-detail\", data);\r\n\t        },\r\n\t        error(opts, status, errorMsg) {\r\n\t            me.handleRequestErrors([], opts);\r\n\t        }\r\n\t    });\r\n\t},\r\n\r\n\tretrieveSubscriptionInvoice(id) {\r\n\t    var me = this;\r\n\t    $.ajax({\r\n\t        method: \"GET\",\r\n\t        url: me.url + \"/Subscriptions/Invoice/\" + id,\r\n\t        dataType: 'json',\r\n\t        success(data, status, opts) {\r\n\t            me.trigger(\"retrieve-subscription-invoice\", data);\r\n\t        },\r\n\t        error(opts, status, errorMsg) {\r\n\t            me.handleRequestErrors([], opts);\r\n\t        }\r\n\t    });\r\n\t},\r\n\r\n\tretrieveSubscriptionInvoices(id) {\r\n\t    var me = this;\r\n\t    $.ajax({\r\n\t        method: \"GET\",\r\n\t        url: me.url + \"/Subscriptions/Invoices/\" + id,\r\n\t        dataType: 'json',\r\n\t        success(data, status, opts) {\r\n\t            me.trigger(\"retrieve-subscription-invoices\", data);\r\n\t        },\r\n\t        error(opts, status, errorMsg) {\r\n\t            me.handleRequestErrors([], opts);\r\n\t        }\r\n\t    });\r\n\t},\r\n\r\n\tretrieveSubscriptionsCustomer(id) {\r\n\t    var me = this;\r\n\t    $.ajax({\r\n\t        method: \"GET\",\r\n\t        url: me.url + \"/Subscriptions/Customers/\" + id,\r\n\t        dataType: 'json',\r\n\t        success(data, status, opts) {\r\n\t            me.trigger(\"retrieve-subscriptions-customer\", data);\r\n\t        },\r\n\t        error(opts, status, errorMsg) {\r\n\t            me.handleRequestErrors([], opts);\r\n\t        }\r\n\t    });\r\n\t},\r\n\r\n\tretrieveSubscriptionsCustomers(params) {\r\n\t    var me = this;\r\n\t    $.ajax({\r\n\t        method: \"GET\",\r\n\t        url: me.url + \"/Subscriptions/Customers\",\r\n\t        dataType: 'json',\r\n\t        success(data, status, opts) {\r\n\t            me.trigger(\"retrieve-subscriptions-customers\", data);\r\n\t        },\r\n\t        error(opts, status, errorMsg) {\r\n\t            me.handleRequestErrors([], opts);\r\n\t        }\r\n\t    });\r\n\t},\r\n\r\n\tretrieveUserSubscription(params) {\r\n\t    var me = this;\r\n\t    $.ajax({\r\n\t        method: \"GET\",\r\n\t        url: me.url + \"/Subscription\",\r\n\t        dataType: 'json',\r\n\t        success(data, status, opts) {\r\n\t            me.trigger(\"retrieve-user-subscription\", data);\r\n\t        },\r\n\t        error(opts, status, errorMsg) {\r\n\t            me.handleRequestErrors([], opts);\r\n\t        }\r\n\t    });\r\n\t},\r\n\r\n\tsuspendUserSubscription() {\r\n\t    var me = this;\r\n\t    $.ajax({\r\n\t        method: \"POST\",\r\n\t        url: me.url + \"/Subscription/Suspend\",\r\n\t        dataType: 'json',\r\n\t        success(data, status, opts) {\r\n\t            UserSession.get(\"user\").Premium = data;\r\n\t            me.trigger(\"suspend-user-subscription\", data);\r\n\t        },\r\n\t        error(opts, status, errorMsg) {\r\n\t            me.handleRequestErrors([], opts);\r\n\t        }\r\n\t    });\r\n\t},\r\n\r\n\tupdateUserSubscription(params) {\r\n\t    var me = this;\r\n\t    $.ajax({\r\n\t        method: \"POST\",\r\n\t        url: me.url + \"/Subscription\",\r\n\t        dataType: 'json',\r\n\t        data: params,\r\n\t        success(data, status, opts) {\r\n\t            UserSession.get(\"user\").Premium = {\r\n\t                Active: true,\r\n                    Late: false\r\n\t            };\r\n\t            me.trigger(\"update-user-subscription\", data);\r\n\t        },\r\n\t        error(opts, status, errorMsg) {\r\n\t            me.handleRequestErrors([], opts);\r\n\t        }\r\n\t    });\r\n\t},\r\n\r\n\ttoHireService(params) {\r\n\t\tvar me = this;\r\n\t\tconsole.log('contratou');\r\n\t\tconsole.log(cartStore.getCacheServicesHired());\r\n\t    $.ajax({\r\n\t        method: \"POST\",\r\n\t        url: me.url + \"/HireService\",\r\n\t        dataType: 'json',\r\n\t\t\tdata: {Services: cartStore.getCacheServicesHired() },\r\n\t        success(data, status, opts) {\r\n\t            me.trigger(\"update-user-subscription\", data);\r\n\t        },\r\n\t        error(opts, status, errorMsg) {\r\n\t            me.handleRequestErrors([], opts);\r\n\t        }\r\n\t    });\r\n\t},\r\n});\r\n\r\nmodule.exports = new FinancialStore();\r\n"]}
{"version":3,"sources":["legacy\\jsx\\core\\util\\Messages.jsx"],"names":["$","require","S","module","exports","_loaded","_messages","_culture","_get","key","_reportUnexistentKey","isEmpty","startsWith","ajax","method","url","BACKEND_URL","success","console","warn","error","getFile","dest","get","data","html","str","s","format","values","tplValues","i","length","template","formatWithKeys","valueKeys","load","callback","me","dataType","status","opts","errorMsg"],"mappings":"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","file":"Messages.jsx","sourceRoot":"C:/Projetos/Nova pasta/ilevus/Ilevus/Views","sourcesContent":["/**\r\n    Este componente gerencia as mensagens internacionalizadas de sistema.\r\n*/\r\n\r\nvar $ = require(\"jquery\");\r\nvar S = require(\"string\");\r\n\r\nmodule.exports = {\r\n    _loaded: false,\r\n    _messages: null,\r\n    _culture: null,\r\n    _get: function (key) {\r\n        if (!this._messages) {\r\n            //throw \"messages not loaded error.\";\r\n            return S(null);\r\n        }\r\n        return S(this._messages[key]);\r\n    },\r\n    _reportUnexistentKey(key) {\r\n        if (S(key).isEmpty() || S(key).startsWith(\"_\"))\r\n            return;\r\n        $.ajax({\r\n            method: \"POST\",\r\n            url: BACKEND_URL + \"Messages/Report?key=\" + key,\r\n            success() {\r\n                console.warn(\"Reported unexistent key:\", key);\r\n            },\r\n            error() {\r\n                console.error(\"Failed to report unexistent key:\", key);\r\n            }\r\n        });\r\n    },\r\n\r\n    getFile: function (key, dest) {\r\n        $.get(key, function (data) {\r\n            $('#' + dest).html(data);\r\n        });\r\n    },\r\n\r\n    get: function (key) {\r\n        var str = this._get(key);\r\n        if (str.isEmpty()) {\r\n            this._reportUnexistentKey(key);\r\n            return \"???\" + key + \"???\";\r\n        }\r\n        return str.s;\r\n    },\r\n    format: function (key, values) {\r\n        var str = this._get(key);\r\n        if (str.isEmpty()) {\r\n            this._reportUnexistentKey(key);\r\n            return \"???\" + key + \"???\";\r\n        }\r\n        var tplValues = {};\r\n        for (var i = 0; i < values.length; i++) {\r\n            tplValues[\"\" + i] = values[i];\r\n        }\r\n        return str.template(tplValues).s;\r\n    },\r\n    formatWithKeys: function (key, valueKeys) {\r\n        var str = this._get(key);\r\n        if (str.isEmpty()) {\r\n            this._reportUnexistentKey(key);\r\n            return \"???\" + key + \"???\";\r\n        }\r\n        var tplValues = {};\r\n        for (var i = 0; i < valueKeys.length; i++) {\r\n            tplValues[\"\" + i] = this.get(valueKeys[i]);\r\n        }\r\n        return str.template(tplValues).s;\r\n    },\r\n    load: function (callback) {\r\n        var me = this;\r\n        if (me._loaded) {\r\n            console.warn(\"Messages already loaded.\");\r\n            return null;\r\n        }\r\n        $.ajax({\r\n            url: BACKEND_URL + \"Messages/Current\",\r\n            method: \"GET\",\r\n            dataType: 'json',\r\n            success: function (data, status, opts) {\r\n                me._messages = data;\r\n                me._loaded = true;\r\n                callback(true);\r\n            },\r\n            error: function (opts, status, errorMsg) {\r\n                console.error(\"Error loading system messages:\\n\", opts, status, errorMsg);\r\n                callback(false);\r\n            }\r\n        });\r\n    }\r\n};"]}
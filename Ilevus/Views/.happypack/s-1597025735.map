{"version":3,"sources":["legacy\\jsx\\core\\store\\Chat.jsx"],"names":["Fluxbone","require","Messages","S","URL","BACKEND_URL","ChatModel","Model","extend","url","validate","attrs","options","errors","length","ChatStore","Store","ACTION_POLL_CONTACTS","ACTION_POLL_NEW_MESSAGES","ACTION_RETRIEVE_CONVERSATION","ACTION_SEND_MESSAGE","dispatchAcceptRegex","model","pollContacts","params","me","$","ajax","method","dataType","data","Since","success","status","opts","trigger","Contacts","error","errorMsg","handleRequestErrors","pollNewMessages","Destination","retrieveConversation","destination","sendMessage","Content","module","exports"],"mappings":"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","file":"Chat.jsx","sourceRoot":"C:/Projetos/Nova pasta/ilevus/Ilevus/Views","sourcesContent":["/**\r\n    Esta é a store da entidade de Usuário do sistema.\r\n*/\r\n\r\nvar Fluxbone = require(\"ilevus/jsx/core/store/Fluxbone.jsx\");\r\nvar Messages = require(\"ilevus/jsx/core/util/Messages.jsx\");\r\nvar S = require(\"string\");\r\n\r\nvar URL = Fluxbone.BACKEND_URL+\"Chat\";\r\n\r\nvar ChatModel = Fluxbone.Model.extend({\r\n\turl: URL,\r\n\tvalidate(attrs, options) {\r\n\t    var errors = [];\r\n\r\n\t\tif (errors.length > 0)\r\n\t\t\treturn errors;\r\n\t}\r\n});\r\n\r\nvar ChatStore = Fluxbone.Store.extend({\r\n    ACTION_POLL_CONTACTS: 'chat-pollContacts',\r\n    ACTION_POLL_NEW_MESSAGES: 'chat-pollNewMessages',\r\n    ACTION_RETRIEVE_CONVERSATION: 'chat-retrieveConversation',\r\n    ACTION_SEND_MESSAGE: 'chat-sendMessage',\r\n    dispatchAcceptRegex: /^chat-[a-zA-Z0-9]+$/,\r\n\r\n\turl: URL,\r\n\tmodel: ChatModel,\r\n\r\n\tpollContacts(params) {\r\n\t    var me = this;\r\n\t    $.ajax({\r\n\t        method: \"GET\",\r\n\t        url: me.url + \"/PollContacts\",\r\n\t        dataType: 'json',\r\n\t        data: {\r\n\t            Since: params.Since\r\n\t        },\r\n\t        success(data, status, opts) {\r\n\t            me.trigger(\"poll-contacts\", data.Contacts);\r\n\t        },\r\n\t        error(opts, status, errorMsg) {\r\n\t            me.handleRequestErrors([], opts);\r\n\t        }\r\n\t    });\r\n\t},\r\n\r\n\tpollNewMessages(params) {\r\n\t    var me = this;\r\n\t    $.ajax({\r\n\t        method: \"GET\",\r\n\t        url: me.url + \"/Poll\",\r\n\t        dataType: 'json',\r\n\t        data: {\r\n\t            Destination: params.Destination,\r\n\t            Since: params.Since\r\n\t        },\r\n\t        success(data, status, opts) {\r\n\t            me.trigger(\"poll-new-messages\", data);\r\n\t        },\r\n\t        error(opts, status, errorMsg) {\r\n\t            me.handleRequestErrors([], opts);\r\n\t        }\r\n\t    });\r\n\t},\r\n\r\n\tretrieveConversation(destination) {\r\n\t    var me = this;\r\n\t    $.ajax({\r\n\t        method: \"GET\",\r\n\t        url: me.url + \"/Ensure\",\r\n\t        dataType: 'json',\r\n\t        data: {\r\n                Destination: destination\r\n\t        },\r\n\t        success(data, status, opts) {\r\n\t            me.trigger(\"retrieve-conversation\", data);\r\n\t        },\r\n\t        error(opts, status, errorMsg) {\r\n\t            me.handleRequestErrors([], opts);\r\n\t        }\r\n\t    });\r\n\t},\r\n\r\n\tsendMessage(params) {\r\n\t    var me = this;\r\n\t    $.ajax({\r\n\t        method: \"POST\",\r\n\t        url: me.url + \"/Send\",\r\n\t        dataType: 'json',\r\n\t        data: {\r\n\t            Destination: params.Destination,\r\n                Content: params.Content\r\n\t        },\r\n\t        success(data, status, opts) {\r\n\t            me.trigger(\"send-message\", data);\r\n\t        },\r\n\t        error(opts, status, errorMsg) {\r\n\t            me.handleRequestErrors([], opts);\r\n\t        }\r\n\t    });\r\n\t}\r\n\r\n});\r\n\r\nmodule.exports = new ChatStore();\r\n"]}
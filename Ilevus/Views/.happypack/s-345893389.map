{"version":3,"sources":["src\\store\\entities\\middleware.js"],"names":["schemas","middleware","action","payload","meta","entities","schema","Array","isArray","result","store","dispatch","next","console","warn"],"mappings":";;;;;;kQAAA;;;AACA;;AACA;;AACA;;AACA;;IAAYA,O;;;;AAEZ,IAAMC,aAAa,SAAbA,UAAa;AAAA,SAAS;AAAA,WAAQ,UAACC,MAAD,EAAY;AAAA,UACtCC,OADsC,GACpBD,MADoB,CACtCC,OADsC;AAAA,UAC7BC,IAD6B,GACpBF,MADoB,CAC7BE,IAD6B;;;AAG9C,UAAIA,QAAQA,KAAKC,QAAjB,EAA2B;AACzB,YAAMC,SAASN,QAAQI,KAAKC,QAAb,CAAf;;AAEA,YAAIC,MAAJ,EAAY;AAAA,2BACmB,0BAC3BH,OAD2B,EAE3BI,MAAMC,OAAN,CAAcL,OAAd,IAAyB,CAACG,MAAD,CAAzB,GAAoCA,MAFT,CADnB;AAAA,cACFG,MADE,cACFA,MADE;AAAA,cACMJ,QADN,cACMA,QADN;;AAKVK,gBAAMC,QAAN,CAAe,8BAAgBN,QAAhB,CAAf;AACA,iBAAOO,kBAAUV,MAAV,IAAkBC,SAASM,MAA3B,IAAP;AACD;AACD;AACA,YAAI,gBAAQ,aAAZ,EAA2B;AACzB;AACAI,kBAAQC,IAAR,6BAAuCV,KAAKC,QAA5C;AACD;AACF;AACD,aAAOO,KAAKV,MAAL,CAAP;AACD,KArB2B;AAAA,GAAT;AAAA,CAAnB;;eAuBeD,U;;;;;;;;;gCAvBTA,U","file":"middleware.js","sourceRoot":"C:/Projetos/Nova pasta/ilevus/Ilevus/Views","sourcesContent":["// https://github.com/diegohaz/arc/wiki/Example-redux-modules#entities\r\nimport { normalize } from 'normalizr'\r\nimport { env } from 'config'\r\nimport { entitiesReceive } from './actions'\r\nimport * as schemas from './schemas'\r\n\r\nconst middleware = store => next => (action) => {\r\n  const { payload, meta } = action\r\n\r\n  if (meta && meta.entities) {\r\n    const schema = schemas[meta.entities]\r\n\r\n    if (schema) {\r\n      const { result, entities } = normalize(\r\n        payload,\r\n        Array.isArray(payload) ? [schema] : schema\r\n      )\r\n      store.dispatch(entitiesReceive(entities))\r\n      return next({ ...action, payload: result })\r\n    }\r\n    // istanbul ignore next\r\n    if (env === 'development') {\r\n      // eslint-disable-next-line no-console\r\n      console.warn(`[entities] There is no ${meta.entities} schema on schemas.js`)\r\n    }\r\n  }\r\n  return next(action)\r\n}\r\n\r\nexport default middleware\r\n"]}
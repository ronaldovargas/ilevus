{"version":3,"sources":["src\\store\\resource\\reducer.js"],"names":["updateOrDeleteReducer","state","type","payload","meta","resource","needle","needleIsObject","list","index","indexOf","slice","detail"],"mappings":";;;;;;;;8QAAA;AACA;;;AACA;;;;AACA;;;;AACA;;AACA;;;;;;;;AAWA,IAAMA,wBAAwB,SAAxBA,qBAAwB,CAACC,KAAD,QAAoC;AAAA,MAA1BC,IAA0B,QAA1BA,IAA0B;AAAA,MAApBC,OAAoB,QAApBA,OAAoB;AAAA,MAAXC,IAAW,QAAXA,IAAW;;AAChE,MAAMC,WAAW,mBAAID,IAAJ,EAAU,UAAV,CAAjB;AACA,MAAME,SAAS,mBAAIF,IAAJ,EAAU,gBAAV,CAAf;AACA,MAAMG,iBAAiB,QAAOD,MAAP,yCAAOA,MAAP,OAAkB,QAAzC;AACA,MAAME,OAAO,wBAAQP,KAAR,EAAeI,QAAf,CAAb;AACA,MAAMI,QAAQF,iBAAiB,yBAAUC,IAAV,EAAgBF,MAAhB,CAAjB,GAA2CE,KAAKE,OAAL,CAAaJ,MAAb,CAAzD;;AAEA,MAAIG,QAAQ,CAAZ,EAAe;AACb,WAAOR,KAAP;AACD;;AAED,UAAQC,IAAR;AACE;AACE,0BACKD,KADL,sBAEGI,QAFH,eAGO,iCAAiBJ,KAAjB,EAAwBI,QAAxB,CAHP;AAIIG,2CACKA,KAAKG,KAAL,CAAW,CAAX,EAAcF,KAAd,CADL,IAEEF,8BAAsBC,KAAKC,KAAL,CAAtB,EAAsCN,OAAtC,IAAkDA,OAFpD,sBAGKK,KAAKG,KAAL,CAAWF,QAAQ,CAAnB,CAHL;AAJJ;AAWF;AACE,0BACKR,KADL,sBAEGI,QAFH,eAGO,iCAAiBJ,KAAjB,EAAwBI,QAAxB,CAHP;AAIIG,2CACKA,KAAKG,KAAL,CAAW,CAAX,EAAcF,KAAd,CADL,sBAEKD,KAAKG,KAAL,CAAWF,QAAQ,CAAnB,CAFL;AAJJ;AAUF;AACA;AACE,aAAOR,KAAP;AA1BJ;AA4BD,CAvCD;;eAyCe,oBAAmD;AAAA,MAAlDA,KAAkD;AAAA;AAAA,MAA1BC,IAA0B,SAA1BA,IAA0B;AAAA,MAApBC,OAAoB,SAApBA,OAAoB;AAAA,MAAXC,IAAW,SAAXA,IAAW;;AAChE,MAAMC,WAAW,mBAAID,IAAJ,EAAU,UAAV,CAAjB;;AAEA,MAAI,CAACC,QAAL,EAAe;AACb,WAAOJ,KAAP;AACD;;AAED,UAAQC,IAAR;AACE;AACE,0BACKD,KADL,sBAEGI,QAFH,eAGO,iCAAiBJ,KAAjB,EAAwBI,QAAxB,CAHP;AAIIG,eAAOL,OAAP,4BAAmB,wBAAQF,KAAR,EAAeI,QAAf,CAAnB;AAJJ;;AAQF;AACE,0BACKJ,KADL,sBAEGI,QAFH,eAGO,iCAAiBJ,KAAjB,EAAwBI,QAAxB,CAHP;AAIIG,cAAM,iDAAsBH,QAAtB;AAJV;AAOF;AACE,0BACKJ,KADL,sBAEGI,QAFH,eAGO,iCAAiBJ,KAAjB,EAAwBI,QAAxB,CAHP;AAIIG,cAAML;AAJV;;AAQF;AACE,0BACKF,KADL,sBAEGI,QAFH,eAGO,iCAAiBJ,KAAjB,EAAwBI,QAAxB,CAHP;AAIIO,gBAAQ,mDAAwBP,QAAxB;AAJZ;AAOF;AACE,0BACKJ,KADL,sBAEGI,QAFH,eAGO,iCAAiBJ,KAAjB,EAAwBI,QAAxB,CAHP;AAIIO,gBAAQT;AAJZ;;AAQF;AACA;AACE,aAAOH,sBAAsBC,KAAtB,EAA6B,EAAEC,UAAF,EAAQC,gBAAR,EAAiBC,UAAjB,EAA7B,CAAP;;AAEF;AACE,aAAOH,KAAP;AAjDJ;AAmDD,C;;;;;;;;;;gCAnGKD,qB","file":"reducer.js","sourceRoot":"C:/Projetos/Nova pasta/ilevus/Ilevus/Views","sourcesContent":["// https://github.com/diegohaz/arc/wiki/Reducers\n// https://github.com/diegohaz/arc/wiki/Example-redux-modules#resource\nimport findIndex from 'lodash/findIndex'\nimport get from 'lodash/get'\nimport { initialState, getResourceState, getList, getDetail } from './selectors'\nimport {\n  RESOURCE_CREATE_SUCCESS,\n  RESOURCE_LIST_READ_REQUEST,\n  RESOURCE_LIST_READ_SUCCESS,\n  RESOURCE_DETAIL_READ_REQUEST,\n  RESOURCE_DETAIL_READ_SUCCESS,\n  RESOURCE_UPDATE_SUCCESS,\n  RESOURCE_DELETE_SUCCESS,\n} from './actions'\n\n\nconst updateOrDeleteReducer = (state, { type, payload, meta }) => {\n  const resource = get(meta, 'resource')\n  const needle = get(meta, 'request.needle')\n  const needleIsObject = typeof needle === 'object'\n  const list = getList(state, resource)\n  const index = needleIsObject ? findIndex(list, needle) : list.indexOf(needle)\n\n  if (index < 0) {\n    return state\n  }\n\n  switch (type) {\n    case RESOURCE_UPDATE_SUCCESS:\n      return {\n        ...state,\n        [resource]: {\n          ...getResourceState(state, resource),\n          list: [\n            ...list.slice(0, index),\n            needleIsObject ? { ...list[index], ...payload } : payload,\n            ...list.slice(index + 1),\n          ],\n        },\n      }\n    case RESOURCE_DELETE_SUCCESS:\n      return {\n        ...state,\n        [resource]: {\n          ...getResourceState(state, resource),\n          list: [\n            ...list.slice(0, index),\n            ...list.slice(index + 1),\n          ],\n        },\n      }\n    // istanbul ignore next\n    default:\n      return state\n  }\n}\n\nexport default (state = initialState, { type, payload, meta }) => {\n  const resource = get(meta, 'resource')\n\n  if (!resource) {\n    return state\n  }\n\n  switch (type) {\n    case RESOURCE_CREATE_SUCCESS:\n      return {\n        ...state,\n        [resource]: {\n          ...getResourceState(state, resource),\n          list: [payload, ...getList(state, resource)],\n        },\n      }\n\n    case RESOURCE_LIST_READ_REQUEST:\n      return {\n        ...state,\n        [resource]: {\n          ...getResourceState(state, resource),\n          list: getList(initialState, resource),\n        },\n      }\n    case RESOURCE_LIST_READ_SUCCESS:\n      return {\n        ...state,\n        [resource]: {\n          ...getResourceState(state, resource),\n          list: payload,\n        },\n      }\n\n    case RESOURCE_DETAIL_READ_REQUEST:\n      return {\n        ...state,\n        [resource]: {\n          ...getResourceState(state, resource),\n          detail: getDetail(initialState, resource),\n        },\n      }\n    case RESOURCE_DETAIL_READ_SUCCESS:\n      return {\n        ...state,\n        [resource]: {\n          ...getResourceState(state, resource),\n          detail: payload,\n        },\n      }\n\n    case RESOURCE_UPDATE_SUCCESS:\n    case RESOURCE_DELETE_SUCCESS:\n      return updateOrDeleteReducer(state, { type, payload, meta })\n\n    default:\n      return state\n  }\n}\n"]}